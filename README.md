# REST API - тестовое задание
Разработка REST API для управления задачами (ToDo). Сервис позволяет создать, найти, обновить и удалить задачу. Интерфейс не предусмотрен, результат будет в виде JSON.
## Стек
- `Go 1.22`
- `SQL`
- `PostgreSQL` - СУБД
- `Postman` - Тестирование API
## Зависимости
- `github.com/gorilla/mux` - Маршрутизатор и диспетчер для создания HTTP-сервисов
- `github.com/joho/godotenv` - Загрузка переменных из файла .env
- `github.com/lib/pq` - Драйвер PostgreSQL для Go
## Запуск программы
1. Клонируйте репозиторий
2. Установите зависимости:
```
go mod tidy
```
3. Создайте базу данных:
Создайте базу данных. Далее, в папке `db` находится файл `schema.sql`, содержащий *sql скрипт* для генерации необходимой базы данных. 
4. Настройте .env файл:
Перейдите в папку `configs` и откройте файл `development.env`. После этого отредактируйте переменные в файле, указав необходимый порт (стандартно стоит `8080`) и ваши параметры Базы данных.
5. Запустите программу:
Перейдите в папку `cmd\todo` и запустите программу с помощью команды:
```
go run main.go
```
6. Сервер запущен по адресу `http://localhost:8080` (порт по умолчанию).
## Конечные точки API
Доступны следующие конечные точки:
- `POST /tasks` : Создание новой задачи. Принимает `json` содержащий `title`, `description` и `due_date`.
- `GET /tasks` : Список всех задач.
- `GET /tasks/{id}` : Поиск задачи по ID. Принимает `json` содержащий `id`.
- `PUT /tasks/{id}` : Обновление задачи по ID. Принимает `json` содержащий `title`, `description` и `due_date`.
- `DELETE /tasks/{id}` : Удаление задачи по ID. Принимает `json` содержащий `id`.
## Структура базы данных
Таблица `tasks` имеет поля:
- `id` - Primary Key
- `title` - Заголовок задачи. Максимальная длинна - 100
- `description` - Описание задачи. Произвольный размер
- `due_date` - Дата и время выполнения задачи с учетом часового пояса
- `created_at` - Дата и время создания записи, по умолчанию устанавливается на текущее время с учетом часового пояса
- `updated_at` - Дата и время последнего обновления записи, по умолчанию устанавливается на текущее время с учетом часового пояса.
## Структура .env файла
- `PORT` - Порт сервера. По умолчанию установлен `:8080`
- `DB_DRIVER` - Драйвер базы данных. По умолчанию установлен для `PostgreSQL`
- `DB_USER` - Имя пользователя для доступа к БД
- `DB_PASSWORD` - Пароль пользователя для доступа к БД
- `DB_HOST` - Сервер БД. По умолчанию установлен `localhost`
- `DB_NAME` - Название базы данных
- `DB_SSLMODE` - SSL режим. По умолчанию установлен `disable`
## Тестирование API
- **POST:** `http://localhost:8080/tasks`. Тело запроса:
```json
{
    "title": "Заголовок задачи",
    "description": "Описание задачи",
    "due_Date": "2024-08-31T14:00:00Z"
}
```
- **GET:** `http://localhost:8080/tasks`
- **GET:** `http://localhost:8080/tasks/1`
- **PUT:** `http://localhost:8080/tasks/1`. Тело запроса:
```json
{
    "title": "Новый заголовок задачи",
    "description": "Новое описание задачи",
    "due_Date": "2024-10-31T14:00:00Z"
}
```
- **DELETE:** `http://localhost:8080/tasks/1`